<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create GitHub Actions syntax for <em>one action</em> — action • ghactions</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />
<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


<meta property="og:title" content="Create GitHub Actions syntax for <em>one action</em> — action" />

<meta property="og:description" content="Thin wrapper around GitHub actions." />

<meta property="og:image" content="https://r-lib.github.io/ghactions/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ghactions</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ghactions.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../pres/index.html">Presentation</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/maxheld83/ghactions">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create GitHub Actions syntax for <em>one action</em></h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/ghactions/blob/master/R/syntax.R'><code>R/syntax.R</code></a></small>
    <div class="hidden name"><code>action.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Thin wrapper around GitHub actions.</p>
    
    </div>

    <pre class="usage"><span class='fu'>action</span>(<span class='no'>IDENTIFIER</span>, <span class='kw'>needs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>uses</span>, <span class='kw'>runs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>args</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>env</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>secrets</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>action2hcl</span>(<span class='no'>l</span>)

<span class='fu'>action2docker</span>(<span class='no'>l</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>IDENTIFIER</th>
      <td><p><code>[character(1)]</code>
Giving the name of the action.</p>
<p>Used:</p><ul>
<li><p>as an informative label on GitHub.com,</p></li>
<li><p>in the <code>needs</code> fields of other <em>action blocks</em> to model the workflow graph,</p></li>
<li><p>in the <code>resolves</code> fields of other <em>workflow blocks</em> to model the workflow graph.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>needs</th>
      <td><p><code>[character()]</code>
giving the actions (by their <code>IDENTIFIER</code>s) that must complete successfully before this action will be invoked.
Defaults to <code>NULL</code> for no upstream dependencies.</p></td>
    </tr>
    <tr>
      <th>uses</th>
      <td><p><code>[character(1)]</code>
giving the Docker image that will run the action.</p></td>
    </tr>
    <tr>
      <th>runs</th>
      <td><p><code>[character()]</code>
giving the command to run in the docker image.
Overrides the <code>Dockerfile</code> <code>ENTRYPOINT</code>.
Defaults to <code>NULL</code> for the default <code>ENTRYPOINT</code> (recommended).</p></td>
    </tr>
    <tr>
      <th>args</th>
      <td><p><code>[character()]</code>
giving the arguments to pass to the action.
Arguments get appended to the last command in <code>ENTRYPOINT</code>.
Defaults to <code>NULL</code> for no arguments.</p></td>
    </tr>
    <tr>
      <th>env</th>
      <td><p><code>[list(character(1)]</code>
giving the environment variables to set in the action's runtime environment.
Defaults to <code>NULL</code> for no environment variables (in addition to the defaults set by GitHub Actions).</p></td>
    </tr>
    <tr>
      <th>secrets</th>
      <td><p><code>[character()]</code>
giving the <em>names</em> of the secret variables to set in the runtime enviornment, which the action can access as an environment variable.
The <em>values</em> of secrets must be set in your repository's "Settings" tab.
<strong>Do not store secrets in your repository.</strong>
GitHub advises against using GitHub actions for production secrets during the public beta period.
Defaults to <code>NULL</code> for no secrets.</p></td>
    </tr>
    <tr>
      <th>l</th>
      <td><p><code>[list()]</code>
giving the named list of HCL fields as returned by <code>action()</code> and <code><a href='workflow.html'>workflow()</a></code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed on to <code><a href='http://processx.r-lib.org/reference/run.html'>processx::run</a></code></p><dl class='dl-horizontal'>
  <dt>error_on_status</dt><dd><p>Whether to throw an error if the command returns
with a non-zero status, or it is interrupted. The error clases are
<code>system_command_status_error</code> and <code>system_command_timeout_error</code>,
respectively, and both errors have class <code>system_command_error</code> as
well. See also "Error conditions" below.</p></dd>
  <dt>wd</dt><dd><p>Working directory of the process. If <code>NULL</code>, the current
working directory is used.</p></dd>
  <dt>echo_cmd</dt><dd><p>Whether to print the command to run to the screen.</p></dd>
  <dt>echo</dt><dd><p>Whether to print the standard output and error
to the screen. Note that the order of the standard output and error
lines are not necessarily correct, as standard output is typically
buffered.</p></dd>
  <dt>spinner</dt><dd><p>Whether to show a reassuring spinner while the process
is running.</p></dd>
  <dt>timeout</dt><dd><p>Timeout for the process, in seconds, or as a <code>difftime</code>
object. If it is not finished before this, it will be killed.</p></dd>
  <dt>stdout_line_callback</dt><dd><p><code>NULL</code>, or a function to call for every
line of the standard output. See <code>stdout_callback</code> and also more
below.</p></dd>
  <dt>stdout_callback</dt><dd><p><code>NULL</code>, or a function to call for every chunk
of the standard output. A chunk can be as small as a single character.
At most one of <code>stdout_line_callback</code> and <code>stdout_callback</code> can be
non-<code>NULL</code>.</p></dd>
  <dt>stderr_line_callback</dt><dd><p><code>NULL</code>, or a function to call for every
line of the standard error. See <code>stderr_callback</code> and also more
below.</p></dd>
  <dt>stderr_callback</dt><dd><p><code>NULL</code>, or a function to call for every chunk
of the standard error. A chunk can be as small as a single character.
At most one of <code>stderr_line_callback</code> and <code>stderr_callback</code> can be
non-<code>NULL</code>.</p></dd>
  <dt>stderr_to_stdout</dt><dd><p>Whether to redirect the standard error to the
standard output. Specifying <code>TRUE</code> here will keep both in the
standard output, correctly interleaved. However, it is not possible
to deduce where pieces of the output were coming from. If this is
<code>TRUE</code>, the standard error callbacks  (if any) are never called.</p></dd>
  <dt>env</dt><dd><p>Environment of the child process, a named character vector.
IF <code>NULL</code>, the environment of the parent is inherited.</p></dd>
  <dt>windows_verbatim_args</dt><dd><p>Whether to omit the escaping of the
command and the arguments on windows. Ignored on other platforms.</p></dd>
  <dt>windows_hide_window</dt><dd><p>Whether to hide the window of the
application on windows. Ignored on other platforms.</p></dd>
  <dt>encoding</dt><dd><p>The encoding to assume for <code>stdout</code> and
<code>stderr</code>. By default the encoding of the current locale is
used. Note that <code>processx</code> always reencodes the output of
both streams in UTF-8 currently.</p></dd>
  <dt>cleanup_tree</dt><dd><p>Whether to clean up the child process tree after
the process has finished.</p></dd>
</dl></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>[list()]</code> list of action attributes.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For details on the syntax and arguments, see <a href='https://developer.github.com/actions/creating-workflows/workflow-configuration-options/'>here</a></p>
<p>These functions are for <strong>advanced users</strong> knowledgeable about GitHub actions.
Novice users may be better served by the complete templates in workflows.</p>
<p>These functions provide very thin wrappers around existing GitHub actions, including actions from other repositories.
Essentially, they just create lists ready to be ingested by <code>action2hcl()</code>, which then turns these R lists into valid GitHub actions syntax blocks.</p>
<p>For documentation on these actions, consult their respective <code>README.md</code>s linked in the below.
Some variants of these action wrappers include sensible defaults for frequent uses in R.</p>
<p>The <code>uses</code> field is <em>always</em> hardcoded to a particular commit or tag of the underlying github action to ensure compatibility.</p>
<p>To render an action block completely from scratch, you can always use the templating function <code>action()</code>.</p>
    
    <h2 class="hasAnchor" id="functions"><a class="anchor" href="#functions"></a>Functions</h2>

    <ul>
<li><p><code>action2hcl</code>: Convert action to HCL</p></li>
<li><p><code>action2docker</code>: Construct corresponding <code>docker run</code> command for an action.</p></li>
</ul>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># many R projects will need this block to first build an image from a DOCKERFILE</span>
<span class='no'>l</span> <span class='kw'>&lt;-</span> <span class='fu'>action</span>(
  <span class='kw'>IDENTIFIER</span> <span class='kw'>=</span> <span class='st'>"Add two numbers"</span>,
  <span class='kw'>uses</span> <span class='kw'>=</span> <span class='st'>"rocker/r-ver:3.6.1"</span>,
  <span class='kw'>args</span> <span class='kw'>=</span> <span class='st'>"Rscript -e '1+1'"</span>
)
<span class='fu'>action2hcl</span>(<span class='kw'>l</span> <span class='kw'>=</span> <span class='no'>l</span>)</div><div class='output co'>#&gt; action "Add two numbers" {
#&gt; 
#&gt;   uses = "rocker/r-ver:3.6.1"
#&gt;   args = [
#&gt;     "Rscript -e '1+1'"
#&gt;   ]
#&gt; }
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#functions">Functions</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://www.maxheld.de'>Max Held</a>, <a href='https://jimhester.com/'>Jim Hester</a>, RStudio Inc..</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '8f10ced26cbc746213d4922f059ceb49',
    indexName: 'ghactions',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>


  </body>
</html>

